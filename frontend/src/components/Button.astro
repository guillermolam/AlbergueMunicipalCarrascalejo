---
export interface Props {
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';
  size?: 'sm' | 'md' | 'lg' | 'xl';
  icon?: string;
  iconPosition?: 'left' | 'right';
  loading?: boolean;
  disabled?: boolean;
  fullWidth?: boolean;
  rounded?: boolean;
  shadow?: boolean;
  glow?: boolean;
  class?: string;
  href?: string;
  target?: string;
  rel?: string;
  type?: 'button' | 'submit' | 'reset';
  onClick?: string;
  children: any;
}

const {
  variant = 'primary',
  size = 'md',
  icon,
  iconPosition = 'left',
  loading = false,
  disabled = false,
  fullWidth = false,
  rounded = false,
  shadow = true,
  glow = false,
  class: className = '',
  href,
  target,
  rel,
  type = 'button',
  onClick,
  children,
} = Astro.props;

const baseClasses =
  'inline-flex items-center justify-center font-semibold transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';

const variantClasses = {
  primary:
    'bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 focus:ring-green-500 active:from-green-700 active:to-emerald-800',
  secondary:
    'bg-gradient-to-r from-yellow-400 to-orange-500 text-gray-900 hover:from-yellow-500 hover:to-orange-600 focus:ring-yellow-500 active:from-yellow-600 active:to-orange-700',
  outline:
    'bg-transparent border-2 border-green-500 text-green-600 hover:bg-green-50 focus:ring-green-500 active:bg-green-100',
  ghost: 'bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 active:bg-gray-200',
  danger:
    'bg-gradient-to-r from-red-500 to-pink-600 text-white hover:from-red-600 hover:to-pink-700 focus:ring-red-500 active:from-red-700 active:to-pink-800',
};

const sizeClasses = {
  sm: 'px-3 py-2 text-sm',
  md: 'px-4 py-2.5 text-base',
  lg: 'px-6 py-3 text-lg',
  xl: 'px-8 py-4 text-xl',
};

const widthClasses = fullWidth ? 'w-full' : '';
const roundedClasses = rounded ? 'rounded-full' : 'rounded-xl';
const shadowClasses = shadow ? 'shadow-lg hover:shadow-xl' : '';
const glowClasses = glow ? 'hover:shadow-2xl hover:shadow-green-500/25' : '';

const buttonClasses = `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${widthClasses} ${roundedClasses} ${shadowClasses} ${glowClasses} ${className}`;

const iconElement = icon ? (
  <span
    class={`text-${size === 'sm' ? 'base' : size === 'xl' ? '2xl' : 'lg'} ${iconPosition === 'right' ? 'order-2 ml-2' : 'mr-2'}`}
  >
    {icon}
  </span>
) : null;

const loadingSpinner = loading ? (
  <svg
    class={`animate-spin h-5 w-5 ${iconPosition === 'right' ? 'order-2 ml-2' : 'mr-2'}`}
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
  >
    <circle
      class="opacity-25"
      cx="12"
      cy="12"
      r="10"
      stroke="currentColor"
      stroke-width="4"
    ></circle>
    <path
      class="opacity-75"
      fill="currentColor"
      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
    ></path>
  </svg>
) : null;

const content = (
  <>
    {loading && loadingSpinner}
    {!loading && icon && iconElement}
    <span class="relative z-10">{children}</span>
  </>
);
---

{
  href ? (
    <a
      href={href}
      target={target}
      rel={rel}
      class={buttonClasses}
      aria-disabled={disabled || loading}
      role="button"
    >
      {content}
    </a>
  ) : (
    <button type={type} class={buttonClasses} disabled={disabled || loading} onclick={onClick}>
      {content}
    </button>
  )
}

<style>
  /* Enhanced button animations */
  .gorgeous-button {
    position: relative;
    overflow: hidden;
  }

  .gorgeous-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
  }

  .gorgeous-button:hover::before {
    left: 100%;
  }

  /* Ripple effect */
  .gorgeous-button::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition:
      width 0.6s,
      height 0.6s;
  }

  .gorgeous-button:active::after {
    width: 300px;
    height: 300px;
  }

  /* 3D transform on hover */
  .gorgeous-button:hover {
    transform: translateY(-2px) scale(1.02);
  }

  .gorgeous-button:active {
    transform: translateY(0) scale(0.98);
  }
</style>
