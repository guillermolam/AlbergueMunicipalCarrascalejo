spin_manifest_version = 2

[application]
name = "albergue-frontend"
version = "1.0.0"
description = "Frontend for Albergue Municipal Carrascalejo"
authors = ["Albergue Team"]

# ──────────────────────── HTTP triggers ────────────────────────
# Serve static assets first (CSS, JS, images, etc.)
[[trigger.http]]
route = "/assets/..."
component = "static-assets"

# Serve public assets
[[trigger.http]]
route = "/public/..."
component = "public-assets"

# API routes should be handled by backend services (not here)
# All other routes go to the main app for React Router client-side routing
[[trigger.http]]
route = "/..."
component = "main-app"

# ──────────────────────── Components ───────────────────────────
# Main app - serves the React Router SPA
# This component serves index.html for all routes, allowing React Router to handle client-side routing
[component."main-app"]
source = "spin:fileserver"
files = [{ source = "dist", destination = "/" }]
# Note: Spin's fileserver will serve index.html for routes that don't match files
# This allows React Router to handle all client-side routing

# Static assets from the build
[component."static-assets"]
source = "spin:fileserver"
files = [{ source = "dist/assets", destination = "/assets" }]

# Public assets
[component."public-assets"]
source = "spin:fileserver"
files = [{ source = "public", destination = "/public" }]
