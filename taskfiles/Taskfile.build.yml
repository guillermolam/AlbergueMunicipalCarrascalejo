version: "3"
tasks:
  frontend:
    desc: Build frontend (if using Spin static assets)
    cmds:
      - cd frontend && pnpm install --frozen-lockfile && pnpm run build

  gateway:
    desc: Build gateway (Spin WASM)
    cmds:
      - cd gateway && spin build

  auth-service:
    desc: Build backend/auth-service (Spin)
    cmds:
      - cd backend/auth-service && spin build

  booking-service:
    desc: Build backend/booking-service (Spin)
    cmds:
      - cd backend/booking-service && spin build

  document-validation-service:
    desc: Build backend/document-validation-service (Spin)
    cmds:
      - cd backend/document-validation-service && spin build

  info-on-arrival-service:
    desc: Build backend/info-on-arrival-service (Spin)
    cmds:
      - cd backend/info-on-arrival-service && spin build

  location-service:
    desc: Build backend/location-service (Spin)
    cmds:
      - cd backend/location-service && spin build

  notification-service:
    desc: Build backend/notification-service (Spin)
    cmds:
      - cd backend/notification-service && spin build

  rate-limiter-service:
    desc: Build backend/rate-limiter-service (Spin)
    cmds:
      - cd backend/rate-limiter-service && spin build

  redis-service:
    desc: Build backend/redis-service (Spin)
    cmds:
      - cd backend/redis-service && spin build

  reviews-service:
    desc: Build backend/reviews-service (Spin)
    cmds:
      - cd backend/reviews-service && spin build

  security-service:
    desc: Build backend/security-service (Spin)
    cmds:
      - cd backend/security-service && spin build

  all:
    desc: Build all deployable components (frontend and backend services)
    deps:
      - frontend
      - gateway
