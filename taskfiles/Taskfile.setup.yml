# Taskfile para configuracion inicial del proyecto
# Instala dependencias y configura el entorno

version: "3"

vars:
  SCRIPTS_DIR: scripts/development
  PYTHON: python3
  BUN: bun
  CARGO: cargo

tasks:
  deps:
    desc: Instala todas las dependencias del proyecto
    cmds:
      - echo "Instalando dependencias..."
      - task: deps:frontend
      - task: deps:backend
      - task: deps:gateway

  deps:frontend:
    desc: Instala dependencias del frontend
    dir: frontend
    cmds:
      - echo "Instalando dependencias del frontend..."
      - "{{.BUN}} install"
    sources:
      - package.json
      - bun.lock

  deps:backend:
    desc: Instala dependencias del backend (Rust)
    cmds:
      - echo "Instalando dependencias del backend..."
      - "{{.CARGO}} fetch"

  deps:gateway:
    desc: Instala dependencias del gateway
    dir: gateway
    cmds:
      - echo "Instalando dependencias del gateway..."
      - "{{.CARGO}} fetch"

  database:
    desc: Configura la base de datos
    cmds:
      - echo "Configurando base de datos..."
      - bash database/scripts/setup-db.sh

  all:
    desc: Configuracion completa inicial
    deps: [deps, database]
    cmds:
      - echo "Configuracion inicial completa"
